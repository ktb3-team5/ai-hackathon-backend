openapi: 3.0.0
info:
  title: K-Culture Trip API
  description: |
    K-Culture ê¸°ë°˜ ê°œì¸í™” ì—¬í–‰ ì„œë¹„ìŠ¤ API ëª…ì„¸ì„œ (User Request Update).
    ì„¸ì…˜ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ìë¥¼ ì‹ë³„í•˜ë©°, ì¸ê¸° ë¦¬ìŠ¤íŠ¸ì™€ ê°œì¸í™”ëœ ë¦¬ìŠ¤íŠ¸/ìƒì„¸ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
  version: 2.0.0
servers:
  - url: https://api.k-culture-trip.com
    description: Production Server

components:
  schemas:
    # --- 1. ì„¸ì…˜(Session) ìŠ¤í‚¤ë§ˆ ---
    SessionInitRequest:
      type: object
      description: "ë¡œê·¸ì¸ ë˜ëŠ” ë¹„íšŒì› ì ‘ì† ì‹œ ì„¸ì…˜ ìƒì„± ìš”ì²­"
      properties:
        deviceUuid:
          type: string
          description: "ê¸°ê¸° ê³ ìœ  ì‹ë³„ì (ë¹„íšŒì› ì‹ë³„ìš©)"
          example: "550e8400-e29b-41d4-a716-446655440000"

    SessionResponse:
      type: object
      properties:
        sessionId:
          type: string
          description: "ë°œê¸‰ëœ ì„¸ì…˜ ID (ì´í›„ ìš”ì²­ì˜ Path íŒŒë¼ë¯¸í„°ë¡œ ì‚¬ìš©)"
          example: "sess_abc12345"
        isNewUser:
          type: boolean
          description: "ì‹ ê·œ ìœ ì € ì—¬ë¶€ (trueë©´ ì·¨í–¥ ìˆ˜ì§‘ í•„ìš”)"
          example: true

    # --- 2. ì·¨í–¥(Preferences) ìŠ¤í‚¤ë§ˆ ---
    PreferenceRequest:
      type: object
      required:
        - sessionId
        - tags
      properties:
        sessionId:
          type: string
          example: "sess_abc12345"
        tags:
          type: array
          description: "ìˆ˜ì§‘ëœ ì·¨í–¥ íƒœê·¸ ëª©ë¡"
          items:
            type: string
          example: ["#BTS", "#ì‚¬ì§„ì´¬ì˜", "#íë§"]
        surveyResult:
          type: object
          description: "ì„¤ë¬¸/ë°¸ëŸ°ìŠ¤ê²Œì„ ìƒì„¸ ê²°ê³¼ (Optional)"
          properties:
            favoriteStar:
              type: string
              example: "V(BTS)"
            travelStyle:
              type: string
              enum: [PHOTO, FOOD, HEALING]
              example: "PHOTO"

    # --- 3. ë¯¸ë””ì–´(Media) ëª©ë¡ ìŠ¤í‚¤ë§ˆ ---
    MediaItem:
      type: object
      properties:
        mediaId:
          type: integer
          example: 101
        title:
          type: string
          example: "ë´„ë‚  ë®¤ë¹„ ì´¬ì˜ì§€"
        thumbnailUrl:
          type: string
          example: "https://cdn.example.com/thumb/101.jpg"
        rank:
          type: integer
          description: "ì¸ê¸° ìˆœìœ„ (TOP10 APIì—ì„œ ì‚¬ìš©)"
          example: 1

    MediaListResponse:
      type: object
      properties:
        listType:
          type: string
          enum: [TOP10, PERSONAL]
          example: "TOP10"
        count:
          type: integer
          example: 10
        items:
          type: array
          items:
            $ref: '#/components/schemas/MediaItem'

    # --- 4. ìƒì„¸(Detail) ìŠ¤í‚¤ë§ˆ ---
    # í‘œì¤€/ê°œì¸í™” ê³µí†µ ê¸°ë³¸ ì •ë³´
    LocationBasicInfo:
      type: object
      properties:
        address:
          type: string
          example: "ê°•ì›ë„ ê°•ë¦‰ì‹œ ì£¼ë¬¸ì§„ì"
        operationHours:
          type: string
          example: "24ì‹œê°„ ê°œë°©"

    # ê°œì¸í™” ì»¨í…ìŠ¤íŠ¸ ë°ì´í„°
    ContextData:
      type: object
      properties:
        contextType:
          type: string
          enum: [STANDARD, PHOTO, FOOD]
          example: "PHOTO"
        highlightTitle:
          type: string
          description: "ê°œì¸í™”ëœ ê°•ì¡° ë¬¸êµ¬"
          example: "ğŸ“¸ ë·”ì²˜ëŸ¼ ì¸ìƒìƒ· ì°ëŠ” ê°ë„"
        recommendations:
          type: array
          items:
            type: string
          example: ["ì˜¤í›„ 4ì‹œ ë…¸ì„ íƒ€ì„", "ì‚¼ê°ëŒ€ í•„ìˆ˜"]

    DetailResponse:
      type: object
      properties:
        mediaId:
          type: integer
        locationName:
          type: string
          example: "ì£¼ë¬¸ì§„ í–¥í˜¸í•´ë³€"
        basicInfo:
          $ref: '#/components/schemas/LocationBasicInfo'
        contextData:
          $ref: '#/components/schemas/ContextData'

paths:
  # ----------------------------
  # 1. ì„¸ì…˜ ë¡œê·¸ì¸
  # ----------------------------
  /api/sessions:
    post:
      summary: ì„¸ì…˜ ë¡œê·¸ì¸ (ì„¸ì…˜ ìƒì„±)
      tags:
        - 1. Session & Auth
      description: ì•± ì‹¤í–‰ ì‹œ ìµœì´ˆ í˜¸ì¶œí•˜ì—¬ ì„¸ì…˜ IDë¥¼ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SessionInitRequest'
      responses:
        '200':
          description: ì„¸ì…˜ ë°œê¸‰ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionResponse'

  # ----------------------------
  # 2. ì·¨í–¥ ì •ë³´ ìˆ˜ì§‘
  # ----------------------------
  /api/preferences:
    post:
      summary: ì·¨í–¥ ì •ë³´ ìˆ˜ì§‘ ë° ì €ì¥
      tags:
        - 2. Preferences
      description: ì„¤ë¬¸ì¡°ì‚¬ ë˜ëŠ” ì±—ë´‡ì„ í†µí•´ ìˆ˜ì§‘ëœ ì‚¬ìš©ìì˜ ì·¨í–¥ ì •ë³´ë¥¼ ì„¸ì…˜ì— ì €ì¥í•©ë‹ˆë‹¤.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreferenceRequest'
      responses:
        '200':
          description: ì €ì¥ ì„±ê³µ
          content:
            application/json:
              example:
                message: "ì·¨í–¥ ì •ë³´ê°€ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤."

  # ----------------------------
  # 3. ì¸ê¸° ë¯¸ë””ì–´ TOP10 ëª©ë¡ ì¡°íšŒ
  # ----------------------------
  /api/media/top10:
    get:
      summary: ì¸ê¸° ë¯¸ë””ì–´ TOP10 ëª©ë¡ ì¡°íšŒ
      tags:
        - 3. Media List (General)
      description: ì„¸ì…˜ ì—†ì´ë„ ì ‘ê·¼ ê°€ëŠ¥í•œ ëŒ€ì¤‘ì ì¸ ì¸ê¸° ë¯¸ë””ì–´ 10ê°œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
      responses:
        '200':
          description: ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MediaListResponse'

  # ----------------------------
  # 4. ë¯¸ë””ì–´ ì¶”ì²œ ì—¬í–‰ì§€ ëª©ë¡ ì¡°íšŒ (í‘œì¤€ ìƒì„¸)
  # ----------------------------
  /api/media/{mediaId}:
    get:
      summary: ì—¬í–‰ì§€ ìƒì„¸ í™”ë©´ API ëª…ì„¸ (í‘œì¤€)
      tags:
        - 4. Detail (Standard)
      description: |
        íŠ¹ì • ë¯¸ë””ì–´(mediaId)ì™€ ì—°ê²°ëœ ì—¬í–‰ì§€ì˜ **í‘œì¤€(Standard)** ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
        ê°œì¸í™” ë°ì´í„°ê°€ ì—†ê±°ë‚˜ ë¡œê·¸ì•„ì›ƒ ìƒíƒœì¼ ë•Œ í˜¸ì¶œí•©ë‹ˆë‹¤.
      parameters:
        - name: mediaId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetailResponse'
              example:
                mediaId: 101
                locationName: "ì£¼ë¬¸ì§„ í–¥í˜¸í•´ë³€"
                basicInfo:
                  address: "ê°•ì›ë„ ê°•ë¦‰ì‹œ ì£¼ë¬¸ì§„ì"
                  operationHours: "24ì‹œê°„"
                contextData:
                  contextType: "STANDARD"
                  highlightTitle: "ë°©íƒ„ì†Œë…„ë‹¨ 'ë´„ë‚ ' ì´¬ì˜ì§€"
                  recommendations: ["ë²„ìŠ¤ ì •ë¥˜ì¥ í¬í† ì¡´", "ì£¼ë³€ í•´ìˆ˜ìš•ì¥"]

  # ----------------------------
  # 5. ì‚¬ìš©ì ë§ì¶¤ ë¯¸ë””ì–´ ëª©ë¡ ì¡°íšŒ
  # ----------------------------
  /api/sessions/{sessionId}/media:
    get:
      summary: ì‚¬ìš©ì ë§ì¶¤ ë¯¸ë””ì–´ ëª©ë¡ ì¡°íšŒ
      tags:
        - 5. Media List (Personalized)
      description: |
        íŠ¹ì • ì„¸ì…˜(sessionId)ì˜ ì·¨í–¥ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¶”ì²œëœ ë¯¸ë””ì–´ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
        (ìš”ì²­í•˜ì‹  ê²½ë¡œì˜ {mediaId}ëŠ” ëª©ë¡ ì¡°íšŒ ì„±ê²©ì— ë§ì§€ ì•Šì•„ ì œê±°í•˜ê³  collection í˜•íƒœë¡œ ì •ì˜í–ˆìŠµë‹ˆë‹¤)
      parameters:
        - name: sessionId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MediaListResponse'
              example:
                listType: "PERSONAL"
                count: 5
                items:
                  - mediaId: 101
                    title: "ë·”ê°€ ì‚¬ë‘í•œ ì œì£¼"
                    thumbnailUrl: "..."
                  - mediaId: 205
                    title: "ë„ê¹¨ë¹„ ê³µìœ ì˜ ì‚°ì±…ë¡œ"
                    thumbnailUrl: "..."

  # ----------------------------
  # 6. ì—¬í–‰ì§€ ìƒì„¸ í™”ë©´ API ëª…ì„¸ (ì‚¬ìš©ìí™”)
  # ----------------------------
  /api/sessions/{sessionId}/media/{mediaId}:
    get:
      summary: ì—¬í–‰ì§€ ìƒì„¸ í™”ë©´ API ëª…ì„¸ (ì‚¬ìš©ìí™”)
      tags:
        - 6. Detail (Personalized)
      description: |
        íŠ¹ì • ì„¸ì…˜(sessionId)ì˜ ì·¨í–¥(Context)ì„ ë°˜ì˜í•˜ì—¬ ì¬êµ¬ì„±ëœ ì—¬í–‰ì§€ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
        ì˜ˆ: ì‚¬ì§„ ì´¬ì˜ ì„ í˜¸ ìœ ì €ì—ê²ŒëŠ” í¬í† ì¡´ ì •ë³´ë¥¼ ìµœìƒë‹¨ì— ë…¸ì¶œ.
      parameters:
        - name: sessionId
          in: path
          required: true
          schema:
            type: string
        - name: mediaId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetailResponse'
              example:
                mediaId: 101
                locationName: "ì£¼ë¬¸ì§„ í–¥í˜¸í•´ë³€"
                basicInfo:
                  address: "ê°•ì›ë„ ê°•ë¦‰ì‹œ ì£¼ë¬¸ì§„ì"
                contextData:
                  contextType: "PHOTO"
                  highlightTitle: "ğŸ“¸ ì•„ë¯¸(ARMY)ë¥¼ ìœ„í•œ ì¸ìƒìƒ· ê°€ì´ë“œ"
                  recommendations: ["ì˜¤í›„ 5ì‹œ ë…¸ì„ ì¶”ì²œ", "ì •ë¥˜ì¥ ì •ë©´ ìƒ·"]